# See https://github.com/dotnet/arcade/blob/e52018a/Documentation/Maestro/New-Inter-Branch-Merge-Approach.md

name: Scheduled branch merge
on:
  schedule:
    # Create a merge every day (works only for merges from `main`, others would need a `push` trigger).
    - cron: '0 0 * * *'
  workflow_dispatch:
    inputs:
      configuration_file_branch:
        description: 'Branch to use for configuration file'
        required: true
        default: 'main'

permissions:
  contents: write
  pull-requests: write

jobs:
  merge:
    if: github.repository == 'dotnet/roslyn'
    uses: dotnet/arcade/.github/workflows/inter-branch-merge-base.yml@main
    with:
      configuration_file_path: 'eng/config/feature-branch-merge.jsonc'
      configuration_file_branch: ${{ inputs.configuration_file_branch || 'main' }}