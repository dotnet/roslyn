<vs:DialogWindow
             x:Uid="PullMemberUpDialog" 
             x:Class="Microsoft.VisualStudio.LanguageServices.Implementation.PullMemberUp.PullMemberUpDialog"
             x:ClassModifier="internal"
             x:Name="dialog"
             xmlns:vs="clr-namespace:Microsoft.VisualStudio.PlatformUI;assembly=Microsoft.VisualStudio.Shell.15.0"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:sys="clr-namespace:System;assembly=mscorlib"
             xmlns:self="clr-namespace:Microsoft.VisualStudio.LanguageServices.Implementation.PullMemberUp"
             mc:Ignorable="d" 
             SizeToContent="Width"
             WindowStartupLocation="CenterOwner"
             Height="480"
             Width="520"
             MinHeight="480"
             MinWidth="520"
             HasDialogFrame="True"
             ShowInTaskbar="False"
             HasHelpButton="True"
             Title="{Binding ElementName=dialog, Path=PullMembersUpTitle}">
    <Window.Resources>
        <Thickness x:Key="okAndCancelButtonPadding">5, 3, 8, 4</Thickness>
        <Thickness x:Key="selectDependantsButtonPadding">2, 4, 4, 2</Thickness>
        <sys:Double x:Key="okAndCancelButtonWidth">73</sys:Double>
        <sys:Double x:Key="okAndCancelButtonHeight">21</sys:Double>
        <Style x:Key="LibraryTreeViewItemStyle"
               TargetType="{x:Type TreeViewItem}">
            <Setter Property="IsSelected"
                        Value="{Binding IsSelected, Mode=TwoWay}" />
            <Setter Property="FontWeight"
                        Value="Normal" />
           <Setter Property="IsExpanded" Value="True"/>
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="IsExpanded"
                            Value="{Binding IsExpanded, Mode=TwoWay}" />
                    <Setter Property="FontWeight" Value="Bold" />
                </Trigger>
            </Style.Triggers>
        </Style>

    </Window.Resources>
    <Grid Margin="10,8,10,8">
        <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <StackPanel Grid.Row="0" MinHeight="150" MinWidth="370" Margin="0,0,0,1">
            <Label
                x:Uid="Description"
                x:Name="Description"
                Content="{Binding ElementName=dialog, Path=PullUpDescription}"/>
            <Separator/>
            <GroupBox
                x:Name="TargetSelectionGroupBox"
                Header="{Binding ElementName=dialog, Path=SelectDestination}">
                <TreeView x:Uid="PullTargetTreeView"
                          x:Name="TargetMembersContainer"
                          MinHeight="150"
                          MinWidth="360"
                          ScrollViewer.VerticalScrollBarVisibility="Auto"
                          ItemsSource="{Binding TargetMembersContainer}"
                          ItemContainerStyle="{StaticResource LibraryTreeViewItemStyle}"
                          SelectedItemChanged="TargetMembersContainer_SelectedItemChanged">
                    <TreeView.ItemTemplate>
                        <HierarchicalDataTemplate
                            ItemsSource="{Binding Neighbours}"
                            DataType="{x:Type self:MemberSymbolViewModelGraphNode}">
                            <StackPanel Orientation="Horizontal">
                                <Image Source="{Binding MemberSymbolViewModel.Glyph}"/>
                                <TextBlock
                                    Text="{Binding MemberSymbolViewModel.MemberName}"
                                    AutomationProperties.Name="{Binding MemberSymbolViewModel.MemberAutomationText}"
                                    AutomationProperties.AutomationId="{Binding MemberSymbolModel.MemberName}"/>
                            </StackPanel>
                        </HierarchicalDataTemplate>
                    </TreeView.ItemTemplate>
                </TreeView>
            </GroupBox>
        </StackPanel>

        <GroupBox
            Header="{Binding ElementName=dialog, Path=SelectMembers}"
            Grid.Row="1"
            MinHeight="200"
            MinWidth="240"
            x:Uid="MemberSelectionLabel">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="70*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <ListView
                    Grid.Column="0"
                    x:Uid="MemberSelection"
                    x:Name="MemberSelection"
                    Margin="2"
                    ScrollViewer.VerticalScrollBarVisibility="Auto"
                    SelectionMode="Single"
                    ItemsSource="{Binding SelectedMembersContainer}">
                    <ListView.View>
                        <GridView>
                            <GridViewColumn Header="{Binding ElementName=dialog, Path=Members}" Width="217" x:Name="membersColumn">
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">
                                            <CheckBox x:Name="MemberSelectionCheckBox"
                                                      AutomationProperties.Name="{Binding MemberName}"
                                                      AutomationProperties.AutomationId="{Binding MemberAutomationText}"
                                                      IsChecked="{Binding IsChecked, UpdateSourceTrigger=PropertyChanged}"
                                                      Width="Auto"
                                                      IsEnabled="{Binding IsSelectable, UpdateSourceTrigger=PropertyChanged}"
                                                      Focusable="False"/>
                                            <Image x:Name="GlyphOfMember"
                                                   Margin="8,0,0,0"
                                                   Source="{Binding Glyph}"/>
                                            <TextBlock x:Uid="MemberName"
                                                       Text="{Binding MemberName}"/>
                                        </StackPanel>
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>
                            <GridViewColumn Header="{Binding ElementName=dialog, Path=MakeAbstract}" Width="Auto" x:Name="makeAbstractColumn">
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <CheckBox x:Name="MakeAbstract" 
                                                  IsEnabled="{Binding IsAbstractSelectable, UpdateSourceTrigger=PropertyChanged}"
                                                  IsChecked="{Binding IsAbstract, UpdateSourceTrigger=PropertyChanged}"/>
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>
                        </GridView>
                    </ListView.View>
                </ListView>
                    <StackPanel Grid.Column="1"
                            Orientation="Vertical"
                            VerticalAlignment="Center"
                            HorizontalAlignment="Center"
                            Width="Auto"
                            MaxWidth="130">
                        <vs:DialogButton
                            x:Name="SelecDependentsButton"
                            Margin="{StaticResource ResourceKey=selectDependantsButtonPadding}"
                            Content="{Binding ElementName=dialog, Path=SelectDependents}"
                            Click="SelecDependentsButton_Click"
                            MinHeight="20"
                            MaxWidth="120"/>
                        <vs:DialogButton
                            x:Name="SelectAllButton"
                            Content="{Binding ElementName=dialog, Path=SelectAll}"
                            Margin="{StaticResource ResourceKey=selectDependantsButtonPadding}"
                            Click="SelectAllButton_Click"
                            MinHeight="20"
                            MaxWidth="120"/>
                        <vs:DialogButton
                            x:Name="SelectPublicButton"
                            Content="{Binding ElementName=dialog, Path=SelectPublic}"
                            Click="SelectPublic_Click"
                            MinHeight="20"
                            MaxWidth="120"
                            Margin="{StaticResource ResourceKey=selectDependantsButtonPadding}"/>
                        <vs:DialogButton
                            x:Name="DeselectedAll"
                            Content="{Binding ElementName=dialog, Path=DeselectAll}"
                            Click="DeselectedAll_Click"
                            MinHeight="20"
                            MaxWidth="120"
                            Margin="{StaticResource ResourceKey=selectDependantsButtonPadding}"/>
                    </StackPanel>
                </Grid>
            </GroupBox>
            <StackPanel
                Grid.Row="2"
                HorizontalAlignment="Right"
                Orientation="Horizontal"
                Margin="0,11,0,0">
                    <vs:DialogButton
                        x:Uid="CancelButton"
                        Click="Cancel_Button_Click"
                        IsCancel="True"
                        Margin= "{StaticResource ResourceKey=okAndCancelButtonPadding}"
                        Content="{Binding Cancel, ElementName=dialog}"
                        MinWidth= "{StaticResource ResourceKey=okAndCancelButtonWidth}"
                        MinHeight="{StaticResource ResourceKey=okAndCancelButtonHeight}"/>
                    <vs:DialogButton 
                        x:Uid="OKButton"
                        Click="OK_Button_Click"
                        IsDefault="True"
                        Margin = "{StaticResource ResourceKey=okAndCancelButtonPadding}"
                        Content="{Binding OK, ElementName=dialog}"
                        MinWidth= "{StaticResource ResourceKey=okAndCancelButtonWidth}"
                        MinHeight="{StaticResource ResourceKey=okAndCancelButtonHeight}"/>
            </StackPanel>
    </Grid>
</vs:DialogWindow>