<?xml version="1.0" encoding="utf-8"?>
<!-- Licensed to the .NET Foundation under one or more agreements. The .NET Foundation licenses this file to you under the MIT license. See the LICENSE file in the project root for more information. -->
<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <OutputType>Library</OutputType>
    <RootNamespace>Microsoft.CodeAnalysis.CSharp.ExpressionEvaluator</RootNamespace>
    <AssemblyName>Microsoft.CodeAnalysis.CSharp.ExpressionEvaluator.ResultProvider.UnitTests</AssemblyName>
    <TargetFrameworks>net472;$(NetRoslyn)</TargetFrameworks>
    <AllowUnsafeBlocks>true</AllowUnsafeBlocks>
  </PropertyGroup>
  <ItemGroup Label="Project References">
    <ProjectReference Include="..\..\..\..\Compilers\Test\Utilities\CSharp\Microsoft.CodeAnalysis.CSharp.Test.Utilities.csproj" />
    <ProjectReference Include="..\..\..\..\Compilers\Core\Portable\Microsoft.CodeAnalysis.csproj" />
    <ProjectReference Include="..\..\..\..\Compilers\CSharp\Portable\Microsoft.CodeAnalysis.CSharp.csproj" />
    <ProjectReference Include="..\..\..\..\Compilers\Test\Resources\Core\Microsoft.CodeAnalysis.Compiler.Test.Resources.csproj" />
    <ProjectReference Include="..\..\..\..\Compilers\Test\Core\Microsoft.CodeAnalysis.Test.Utilities.csproj" />
    <ProjectReference Include="..\..\..\Core\Test\ResultProvider\Microsoft.CodeAnalysis.ResultProvider.Utilities.csproj" />
    <ProjectReference Include="..\..\..\..\Test\PdbUtilities\Roslyn.Test.PdbUtilities.csproj" />
  </ItemGroup>
  <!--
    ResultProvider tests rely on dynamically instantiating objects into the test process via reflection.
    As some types cannot exist in .NET Framework (e.g. an [InlineArray] struct) we have to split our tests based on the
    target framework of the test project.
  -->
  <ItemGroup Condition="'$(TargetFramework)' == 'net472'">
    <Reference Include="Microsoft.CSharp" />
    <Reference Include="System" />
    <Reference Include="System.Xml" />
    <!--Don't compile NetCore tests-->
    <Compile Remove="NetCoreTests\**\*.cs"/>
    <!--Keep the folder visible in the IDE-->
    <None Include="NetCoreTests\**\*.cs"/>
  </ItemGroup>
  <ItemGroup Condition="'$(TargetFramework)' == '$(NetRoslyn)'">
    <!--Only compile the tests under NetCoreTests-->
    <Compile Remove="**\*.cs" />
    <Compile Include="CSharpResultProviderTestBase.cs"/>
    <Compile Include="NetCoreTests\**\*.cs" />
  </ItemGroup>
  <ItemGroup>
    <Compile Include="..\..\..\..\Compilers\CSharp\Portable\SymbolDisplay\ObjectDisplay.cs">
      <Link>Compiler\SymbolDisplay\ObjectDisplay.cs</Link>
    </Compile>
  </ItemGroup>
  <ItemGroup>
    <Service Include="{82A7F48D-3B50-4B1E-B82E-3ADA8210C358}" />
  </ItemGroup>
  <Import Project="..\..\Source\ResultProvider\CSharpResultProvider.projitems" Label="Shared" />
  <Import Project="$(RepositoryEngineeringDir)targets\ILAsm.targets" />
</Project>