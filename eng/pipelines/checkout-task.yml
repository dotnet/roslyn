# Shallow checkout sources
steps:
  - checkout: none
  - script: |
      git init
      git config --local core.compression 0
      git config --local core.looseCompression 0
      git config --local checkout.workers 0
      git config --local fetch.parallel 0
      git config --local index.threads 0
      git config --local pack.threads 0
      git remote add origin "$(Build.Repository.Uri)"
      git fetch --progress --no-tags --no-auto-maintenance --depth=1 origin "$(Build.SourceVersion)"
      git checkout --progress "$(Build.SourceVersion)"
    displayName: Shallow Checkout