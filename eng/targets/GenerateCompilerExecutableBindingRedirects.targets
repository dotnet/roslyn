<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (c)  Microsoft.  All Rights Reserved.  Licensed under the Apache License, Version 2.0.  See License.txt in the project root for license information. -->
<Project ToolsVersion="14.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <PropertyGroup>
    <MSBuildAllProjects>$(MSBuildAllProjects);$(MSBuildThisFileFullPath)</MSBuildAllProjects>
  </PropertyGroup>

  <!-- The inclusion of this file will cause the resulting .exe.config to contain redirects for our core compiler assemblies,
       which is needed for things like analyzers to load. -->

  <PropertyGroup>
    <AutoGenerateBindingRedirects>true</AutoGenerateBindingRedirects>
  </PropertyGroup>

  <Target Name="_GenerateCompilerExecutableBindingRedirects" BeforeTargets="GenerateBindingRedirects" DependsOnTargets="GetAssemblyVersion">
    <Error Text="AssemblyVersion is not initialized" Condition="'$(AssemblyVersion)' == ''"/>
    
    <ItemGroup>
      <!-- The version 0.0.0.0 in these references doesn't actually matter; the generated versions will always generate from 0.0.0.0-->
      <SuggestedBindingRedirects Include="Microsoft.CodeAnalysis, Version=0.0.0.0, Culture=neutral, PublicKeyToken=$(PublicKeyToken)">
        <MaxVersion>$(AssemblyVersion)</MaxVersion>
      </SuggestedBindingRedirects>
      <SuggestedBindingRedirects Include="Microsoft.CodeAnalysis.CSharp, Version=0.0.0.0, Culture=neutral, PublicKeyToken=$(PublicKeyToken)">
        <MaxVersion>$(AssemblyVersion)</MaxVersion>
      </SuggestedBindingRedirects>
      <SuggestedBindingRedirects Include="Microsoft.CodeAnalysis.VisualBasic, Version=0.0.0.0, Culture=neutral, PublicKeyToken=$(PublicKeyToken)">
        <MaxVersion>$(AssemblyVersion)</MaxVersion>
      </SuggestedBindingRedirects>
      <SuggestedBindingRedirects Include="System.Collections.Immutable, Version=0.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a">
        <MaxVersion>1.2.3.0</MaxVersion>
      </SuggestedBindingRedirects>
      <SuggestedBindingRedirects Include="System.Reflection.Metadata, Version=0.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a">
        <MaxVersion>1.4.3.0</MaxVersion>
      </SuggestedBindingRedirects>
      <SuggestedBindingRedirects Include="System.Runtime.CompilerServices.Unsafe, Version=0.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a">
        <MaxVersion>4.0.4.0</MaxVersion>
      </SuggestedBindingRedirects>
      <SuggestedBindingRedirects Include="System.Text.Encoding.CodePages, Version=0.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a">
        <MaxVersion>4.1.1.0</MaxVersion>
      </SuggestedBindingRedirects>
      <SuggestedBindingRedirects Include="System.Threading.Tasks.Extensions, Version=0.0.0.0, Culture=neutral, PublicKeyToken=cc7b13ffcd2ddd51">
        <MaxVersion>4.2.0.0</MaxVersion>
      </SuggestedBindingRedirects>
    </ItemGroup>
  </Target>
</Project>